model_name: model4_random_forest
description: Random Forest for feature importance and accuracy

hyperparameters:
  # Number of trees (MOST IMPORTANT)
  n_estimators:
    - 100
    - 200
    - 500
  
  # Tree depth (IMPORTANT)
  max_depth:
    - 5
    - 10
    - 15
    - null      # No limit
  
  # Regularization
  min_samples_split:
    - 2
    - 10
  
  min_samples_leaf:
    - 1
    - 4
  
  # Feature sampling
  max_features:
    - sqrt
    - 0.5
    - null      # Use all features
  
  # Bootstrap
  bootstrap:
    - true

defaults:
  n_estimators: 200
  max_depth: 10
  min_samples_split: 5
  min_samples_leaf: 2
  max_features: sqrt
  bootstrap: true

notes: |
  Reduced to core parameters for efficient tuning.
  Total grid size: 3 * 4 * 2 * 2 * 3 = 144 combinations
  
  bootstrap:
    - true
    - false
  
  min_impurity_decrease:
    - 0.0
    - 0.0001
    - 0.001
    - 0.01
    - 0.05
    - 0.1
  
  # Criterion for splits
  criterion:
    - squared_error   # MSE
    - absolute_error  # MAE
    - friedman_mse
    - poisson
  
  # Class weight (for imbalanced data)
  class_weight:
    - null            # No weighting
    - balanced
    - balanced_subsample
  
  # Out-of-bag score
  oob_score:
    - true
    - false
  
  # Minimum weight fraction
  min_weight_fraction_leaf:
    - 0.0
    - 0.01
    - 0.05
  
  # Maximum leaf nodes
  max_leaf_nodes:
    - null     # Unlimited
    - 10
    - 20
    - 50
    - 100
  
  ccp_alpha:
    - 0.0
    - 0.001
    - 0.01
    - 0.1
  
  # Warm start
  warm_start:
    - true
    - false
  
  # Random state
  random_state:
    - 42
    - 123
    - 2024
  
  # Number of jobs
  n_jobs:
    - -1       # Use all cores
    - 4
    - 8

defaults:
  n_estimators: 200
  max_depth: 10
  min_samples_split: 5
  min_samples_leaf: 2
  max_features: sqrt
  max_samples: null
  bootstrap: true
  min_impurity_decrease: 0.0
  criterion: squared_error
  class_weight: null
  oob_score: true
  min_weight_fraction_leaf: 0.0
  max_leaf_nodes: null
  ccp_alpha: 0.0
  warm_start: false
  random_state: 42
  n_jobs: -1

notes: |
  Random Forest specific parameters:
  - n_estimators: More trees = better performance (200-500 typical)
  - max_depth: Control overfitting (5-15 for hockey data)
  - min_samples_split/leaf: Regularization (higher = less overfitting)
  - max_features: Decorrelate trees ('sqrt' or 'log2' recommended)
  - bootstrap: Use bagging (almost always true)
  - oob_score: Free validation score (use when bootstrap=true)
  - criterion: 'absolute_error' more robust to outliers than 'squared_error'
  
  Hockey-specific tips:
  - Use oob_score=true for free validation without holdout set
  - max_depth=7-10 works well for team stats (not too deep)
  - min_samples_leaf=2-4 prevents overfitting to individual games
  - Feature importance reveals which stats matter most
